{% extends 'docs/header.html' %}
{% block content %}

<div class="container my-5">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-light p-3 rounded shadow-sm">
            <li class="breadcrumb-item"><a href="{% url 'immigration_dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Officer Users</li>
        </ol>
    </nav>

    <!-- Display Messages -->
    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <h2 class="text-center my-4">Officer Users & Groups</h2>

    <!-- Action Buttons -->
    <div class="d-flex justify-content-center mb-4">
        <a href="{% url 'create_user' %}" class="btn btn-primary mx-2 shadow-sm"><i class="fas fa-user-plus"></i> Create User</a>
        <a href="{% url 'create_group' %}" class="btn btn-secondary mx-2 shadow-sm"><i class="fas fa-users-cog"></i> Create Group</a>
        <a href="{% url 'boot_list' %}" class="btn btn-info mx-2 shadow-sm"><i class="fas fa-list"></i> List Boots</a>
    </div>

    <!-- Immigration Officers Table -->
    <h4 class="mt-5">Immigration Officers</h4>
    <div class="table-responsive shadow-sm">
        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Date Joined</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in immigration_officers %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.date_joined|date:"Y-m-d" }}</td>
                        <td>
                            <a href="/immigration/edit_user/{{ user.id }}" class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Edit</a>
                            <a href="/immigration/delete_user/{{ user.id }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> Delete</a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">No immigration officers found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Police Officers Table -->
    <h4 class="mt-5">Police Officers</h4>
    <div class="table-responsive shadow-sm">
        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Date Joined</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in police_officers %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.date_joined|date:"Y-m-d" }}</td>
                        <td>
                            <a href="/immigration/edit_user/{{ user.id }}" class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Edit</a>
                            <a href="/immigration/delete_user/{{ user.id }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> Delete</a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">No police officers found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tax Officers Table -->
    <h4 class="mt-5">Tax Officers</h4>
    <div class="table-responsive shadow-sm">
        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Date Joined</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in tax_officers %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.date_joined|date:"Y-m-d" }}</td>
                        <td>
                            <a href="/immigration/edit_user/{{ user.id }}" class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Edit</a>
                            <a href="/immigration/delete_user/{{ user.id }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> Delete</a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">No tax officers found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Back to Dashboard Button -->
    <div class="text-center mt-5">
        <a href="{% url 'immigration_dashboard' %}" class="btn btn-secondary shadow-sm">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>
</div>

{% endblock %}
